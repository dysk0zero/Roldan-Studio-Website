---
import Contact from "../components/Contact.astro";
import Hero from "../components/Hero.astro";
import HowIWork from "../components/HowIWork.astro";
import Manifest from "../components/Manifest.astro";
import Services from "../components/Services.astro";
import Testimonies from "../components/Testimonies.astro";
import WhatIDo from "../components/WhatIDo.astro";
import Layout from "../layouts/Layout.astro";

import en from "../locales/en.json";

const supportedLocales = ['en', 'es', 'de'];
const fallbackLocale = 'en';

const locale = Astro.preferredLocale?.split('-')[0] || fallbackLocale;
const redirectLocale = supportedLocales.includes(locale) ? locale : fallbackLocale;

return Astro.redirect(`/${redirectLocale}/`);
---

<Layout t={en.layout} >
  <Hero t={en.hero} />
  <WhatIDo />
  <HowIWork />
  <Manifest />
  <Services />
  <Testimonies />
  <Contact />
</Layout>
